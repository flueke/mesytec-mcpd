<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="René Ferdinand Rivera Morell">
<meta name="copyright" content="Copyright 2019 René Ferdinand Rivera Morell">
<title>Lyra</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Lyra</h1>
<div class="details">
<span id="author" class="author">René Ferdinand Rivera Morell</span><br>
<span id="email" class="email"><a href="mailto:grafikrobot@gmail.com">grafikrobot@gmail.com</a></span><br>
<span id="revnumber"> 1.5</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_license">1.1. License</a></li>
<li><a href="#_features">1.2. Features</a></li>
</ul>
</li>
<li><a href="#_usage">2. Usage</a>
<ul class="sectlevel2">
<li><a href="#_single_option">2.1. Single Option</a></li>
<li><a href="#_multiple_options">2.2. Multiple Options</a></li>
</ul>
</li>
<li><a href="#_alternate_specification">3. Alternate Specification</a></li>
<li><a href="#_help_option">4. Help Option</a></li>
<li><a href="#_value_choices">5. Value Choices</a></li>
<li><a href="#_option_values">6. Option Values</a></li>
<li><a href="#_sub_commands">7. Sub-commands</a></li>
<li><a href="#_argument_groups">8. Argument Groups</a></li>
<li><a href="#_main">9. Main</a></li>
<li><a href="#_more_main">10. More Main</a></li>
<li><a href="#_reference">11. Reference</a>
<ul class="sectlevel2">
<li><a href="#lyra_parser_customization">11.1. <code>lyra::parser_customization</code></a></li>
<li><a href="#lyra_default_parser_customization">11.2. <code>lyra::default_parser_customization</code></a></li>
<li><a href="#lyra_parser_result">11.3. <code>lyra::parser_result</code></a></li>
<li><a href="#lyra_parser">11.4. <code>lyra::parser</code></a></li>
<li><a href="#lyra_composable_parser">11.5. <code>lyra::composable_parser</code></a></li>
<li><a href="#lyra_bound_parser">11.6. <code>lyra::bound_parser</code></a></li>
<li><a href="#lyra_cli">11.7. <code>lyra::cli</code></a></li>
<li><a href="#lyra_opt">11.8. <code>lyra::opt</code></a></li>
<li><a href="#lyra_arg">11.9. <code>lyra::arg</code></a></li>
<li><a href="#lyra_help">11.10. <code>lyra::help</code></a></li>
<li><a href="#lyra_exe_name">11.11. <code>lyra::exe_name</code></a></li>
<li><a href="#lyra_args">11.12. <code>lyra::args</code></a></li>
<li><a href="#lyra_arguments">11.13. <code>lyra::arguments</code></a></li>
<li><a href="#lyra_literal">11.14. <code>lyra::literal</code></a></li>
<li><a href="#lyra_group">11.15. <code>lyra::group</code></a></li>
<li><a href="#lyra_command">11.16. <code>lyra::command</code></a></li>
<li><a href="#lyra_main">11.17. <code>lyra::main</code></a></li>
<li><a href="#lyra_val">11.18. <code>lyra::val</code></a></li>
</ul>
</li>
<li><a href="#_history">12. History</a>
<ul class="sectlevel2">
<li><a href="#_1_5_1">12.1. 1.5.1</a></li>
<li><a href="#_1_5">12.2. 1.5</a></li>
<li><a href="#_1_4">12.3. 1.4</a></li>
<li><a href="#_1_3">12.4. 1.3</a></li>
<li><a href="#_1_2">12.5. 1.2</a></li>
<li><a href="#_1_1">12.6. 1.1</a></li>
<li><a href="#_1_0">12.7. 1.0</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.admonitionblock .icon .title {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, .5);
}
.caution .icon .title {
    color: rgba(192, 51, 0, 1);
}
.important .icon .title {
    color: rgba(192, 0, 0, 1);
}
.note .icon .title {
    color: rgba(26, 64, 128, 1);
}
.tip .icon .title {
    color: rgba(255, 192, 0, 1);
}
.warning .icon .title {
    color: rgba(192, 102, 0, 1);
}
.hdlist p {
    margin-bottom: 0.25rem;
}
td.hdlist1, td.hdlist2 {
    padding-bottom: 0;
}
p,blockquote,dt,td.content,span.alt {
    font-size: 1.1rem
}
h1, h2, h3, h4, h5, h6 {
    font-weight: bold;
}
h1 {
    font-size: 2.25em;
}
h2 {
    font-size: 1.5em;
}
h3,#toctitle,.sidebarblock>.content>.title {
    font-size: 1.3em;
}
h4, h5 {
    font-size: 1.2em;
}
h6 {
    font-size: 1.1em;
}
</style>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lyra is a simple to use, composing, command line parser for C++ 11 and beyond.
It provides easy to use command line parsing for most use cases with a minimal
source footprint. It doesn&#8217;t aim to provide all features for all users.</p>
</div>
<div class="sect2">
<h3 id="_license"><a class="anchor" href="#_license"></a>1.1. License</h3>
<div class="paragraph">
<p>Distributed under the highly permissive Boost Software License, Version 1.0.
(See accompanying file LICENSE.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" class="bare">http://www.boost.org/LICENSE_1_0.txt</a>)</p>
</div>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a>1.2. Features</h3>
<div class="ulist">
<ul>
<li>
<p>Header only with no external dependencies (except the <code>std</code> library).</p>
</li>
<li>
<p>Define your interface once to get parsing, type conversions and usage
strings with no redundancy.</p>
</li>
<li>
<p>Composing. Each <code>opt</code> or <code>arg</code> is an independent parser. Combine these to
produce a composite parser&#8201;&#8212;&#8201;this can be done in stages across multiple
function calls&#8201;&#8212;&#8201;or even projects.</p>
</li>
<li>
<p>Bind parsers directly to variables that will receive the results of the parse&#8201;&#8212;&#8201;no intermediate dictionaries to worry about.</p>
</li>
<li>
<p>Or can also bind parsers to lambdas for more custom handling.</p>
</li>
<li>
<p>Deduces types from bound variables or lambdas and performs type conversions
(via <code>ostream &lt;&lt;</code>), with error handling, behind the scenes.</p>
</li>
<li>
<p>Bind parsers to vectors for args that can have multiple values.</p>
</li>
<li>
<p>Uses result types for error propagation, rather than exceptions (doesn&#8217;t yet
build with exceptions disabled, but that will be coming later)</p>
</li>
<li>
<p>Models POSIX standards for short and long opt behavior.</p>
</li>
<li>
<p>Customizable option syntax.</p>
</li>
<li>
<p>Specify cardinality of <code>arg</code>-s from one to many.</p>
</li>
<li>
<p>Limit option values to a specified set of values.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a>2. Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use, just <code>#include &lt;lyra/lyra.hpp&gt;</code></p>
</div>
<div class="sect2">
<h3 id="_single_option"><a class="anchor" href="#_single_option"></a>2.1. Single Option</h3>
<div class="paragraph">
<p>A parser for a single option can be created like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;cstdlib&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Where we read in the argument value:</span>
    <span class="tok-kt">int</span> <span class="tok-n">width</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// The parser with the one option argument:</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">()</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">width</span><span class="tok-p">,</span> <span class="tok-s">&quot;width&quot;</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-w&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--width&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;How wide should it be?&quot;</span><span class="tok-p">);</span>

    <span class="tok-c1">// ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use this parser by giving it the program arguments of <code>main</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span>    <span class="tok-c1">// ...</span>

    <span class="tok-c1">// Parse the program arguments:</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>

    <span class="tok-c1">// Check that the arguments where valid:</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Error in command line: &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;width = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">width</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which could be used as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="shell"><span></span>&gt; example1 -w <span class="tok-m">10</span>
<span class="tok-nv">width</span> <span class="tok-o">=</span> <span class="tok-m">10</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_options"><a class="anchor" href="#_multiple_options"></a>2.2. Multiple Options</h3>
<div class="paragraph">
<p>It&#8217;s rare that we are interested in accepting a single option. To parse
multiple options we compose the options as alternatives with the <strong>or</strong>
operator (<code>|</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;cstdlib&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Where we read in the argument values:</span>
    <span class="tok-kt">int</span> <span class="tok-n">width</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">name</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">doIt</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>

    <span class="tok-c1">// The parser with the multiple option arguments. They are composed</span>
    <span class="tok-c1">// together by the &quot;|&quot; operator.</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span>
        <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">width</span><span class="tok-p">,</span> <span class="tok-s">&quot;width&quot;</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-w&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--width&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;How wide should it be?&quot;</span><span class="tok-p">)</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-s">&quot;name&quot;</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-n&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--name&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;By what name should I be known&quot;</span><span class="tok-p">)</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">doIt</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-d&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--doit&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;Do the thing&quot;</span><span class="tok-p">);</span>

    <span class="tok-c1">// ...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use this parser by giving it the program arguments of <code>main</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span>    <span class="tok-c1">// ...</span>

    <span class="tok-c1">// Parse the program arguments:</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>

    <span class="tok-c1">// Check that the arguments where valid:</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Error in command line: &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;width = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">width</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;, name = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">name</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;, doIt = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doIt</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Which could be used as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="shell"><span></span>&gt; example2 -w <span class="tok-m">10</span> --name<span class="tok-o">=</span>Lyra
<span class="tok-nv">width</span> <span class="tok-o">=</span> <span class="tok-m">10</span>, <span class="tok-nv">name</span> <span class="tok-o">=</span> Lyra, <span class="tok-nv">doIt</span> <span class="tok-o">=</span> <span class="tok-m">0</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alternate_specification"><a class="anchor" href="#_alternate_specification"></a>3. Alternate Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using operators for specifying the parser argument is not everyone&#8217;s
"cup of tea". Like all such interface choices there are advantages and
disadvantages to any particular API one chooses. Because of this Lyra supports
both the preceding <code>operator</code> model and a "named arguments using methods"
model for specifying the arguments. Below are the various specification
operations and corresponding operator and method call equivalents:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Help description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser("Help")</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.help("Help")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional argument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.optional()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.optional()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required argument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.required()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.required()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Range of arguments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.cardinality(n,m)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.cardinality(n,m)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value choices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.choices(a,b,c)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.choices(a,b,c)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add argument</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser |= argument</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parser.add_argument(argument)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add option name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>option["--name"]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>option.name("--name")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Help option description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>help.description("Description")</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>help.description("Description")</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The method names try to follow the well known Python <code>argparse</code> nomenclature
for familiarity. Using the alternative methods one could rewrite the previous
two examples. The first one with the single option would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;cstdlib&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Where we read in the argument value:</span>
    <span class="tok-kt">int</span> <span class="tok-n">width</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// The parser with the one option argument:</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">();</span>
    <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
        <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">width</span><span class="tok-p">,</span> <span class="tok-s">&quot;width&quot;</span><span class="tok-p">)</span>
            <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;-w&quot;</span><span class="tok-p">)</span>
            <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--width&quot;</span><span class="tok-p">)</span>
            <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;How wide should it be?&quot;</span><span class="tok-p">));</span>

    <span class="tok-c1">// Parse the program arguments:</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>

    <span class="tok-c1">// Check that the arguments where valid:</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Error in command line: &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;width = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">width</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And the second with multiple options would the become:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;cstdlib&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Where we read in the argument values:</span>
    <span class="tok-kt">int</span> <span class="tok-n">width</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">name</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">doIt</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>

    <span class="tok-c1">// The parser with the multiple option arguments. They are composed</span>
    <span class="tok-c1">// together by the &quot;|&quot; operator.</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">();</span>
    <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">width</span><span class="tok-p">,</span> <span class="tok-s">&quot;width&quot;</span><span class="tok-p">)</span>
        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;-w&quot;</span><span class="tok-p">).</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--width&quot;</span><span class="tok-p">).</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;How wide should it be?&quot;</span><span class="tok-p">));</span>
    <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-s">&quot;name&quot;</span><span class="tok-p">)</span>
        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;-n&quot;</span><span class="tok-p">).</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--name&quot;</span><span class="tok-p">).</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;By what name should I be known&quot;</span><span class="tok-p">));</span>
    <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">doIt</span><span class="tok-p">)</span>
        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;-d&quot;</span><span class="tok-p">).</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--doit&quot;</span><span class="tok-p">).</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;Do the thing&quot;</span><span class="tok-p">));</span>

    <span class="tok-c1">// Parse the program arguments:</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>

    <span class="tok-c1">// Check that the arguments where valid:</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Error in command line: &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;width = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">width</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;, name = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">name</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;, doIt = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doIt</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_help_option"><a class="anchor" href="#_help_option"></a>4. Help Option</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the specified arguments parser we also get convenient help output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Where we read in the argument values:</span>
    <span class="tok-kt">int</span> <span class="tok-n">width</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">name</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">doIt</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">show_help</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span> <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tok-c1">// The parser with the multiple option arguments and help option.</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span>
        <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">width</span><span class="tok-p">,</span> <span class="tok-s">&quot;width&quot;</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-w&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--width&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;How wide should it be?&quot;</span><span class="tok-p">)</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-s">&quot;name&quot;</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-n&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--name&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;By what name should I be known&quot;</span><span class="tok-p">)</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">doIt</span><span class="tok-p">)</span>
              <span class="tok-p">[</span><span class="tok-s">&quot;-d&quot;</span><span class="tok-p">][</span><span class="tok-s">&quot;--doit&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;Do the thing&quot;</span><span class="tok-p">);</span>

    <span class="tok-c1">// ...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Flag variable to indicate if we get the <code>-h</code> or <code>--help</code> option.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The help specific option parser.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We need some changes when using the parser to check if the help option was
specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span>    <span class="tok-c1">// ...</span>

    <span class="tok-c1">// Parse the program arguments:</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>

    <span class="tok-c1">// Check that the arguments where valid:</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Error in command line: &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">cli</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// Show the help when asked for.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">cli</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;width = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">width</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;, name = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">name</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;, doIt = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doIt</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We print out the help text on error.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>And we also print it out when specified.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_value_choices"><a class="anchor" href="#_value_choices"></a>5. Value Choices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For value arguments, i.e. <code>--name=value</code> or positional arguments, one can
specify a set of allowed values. You can indicate the choices explicitly by
specifying them to the <code>choices()</code> call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">choice</span><span class="tok-p">;</span>
    <span class="tok-c1">// Ex: &lt;exe&gt; --choice=red</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">()</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">choice</span><span class="tok-p">,</span> <span class="tok-s">&quot;-c&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;--choice&quot;</span><span class="tok-p">]</span>
              <span class="tok-p">.</span><span class="tok-n">choices</span><span class="tok-p">(</span><span class="tok-s">&quot;red&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;green&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;blue&quot;</span><span class="tok-p">);</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Your preferred color is &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">choice</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can specify a complex set of values by giving <code>choices()</code> a function
that validates if a given value is allowed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-kt">int</span> <span class="tok-n">choice</span> <span class="tok-o">=</span> <span class="tok-mi">5</span><span class="tok-p">;</span>
    <span class="tok-c1">// Ex: &lt;exe&gt; --choice=3</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">()</span>
        <span class="tok-o">|</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">choice</span><span class="tok-p">,</span> <span class="tok-s">&quot;-c&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;--choice&quot;</span><span class="tok-p">]</span>
              <span class="tok-p">.</span><span class="tok-n">choices</span><span class="tok-p">([](</span><span class="tok-kt">int</span> <span class="tok-n">value</span><span class="tok-p">)</span> <span class="tok-p">{</span> <span class="tok-k">return</span> <span class="tok-mi">1</span> <span class="tok-o">&lt;=</span> <span class="tok-n">value</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">value</span> <span class="tok-o">&lt;=</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-p">});</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Your number between one and ten is &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">choice</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For either case the default, initial, value is only modified if a valid value
is given.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_option_values"><a class="anchor" href="#_option_values"></a>6. Option Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For options that are bound to values, and hence that accept a user value on the
command line, various styles of option+value syntax is allowed for the user as
follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long options</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>opt(v, "value").name("--option")</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--option VALUE</code>, <code>--option=VALUE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short options</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>opt(v, "value").name("-o")</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-o VALUE</code>, <code>--o=VALUE</code>, <code>-oVALUE</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_sub_commands"><a class="anchor" href="#_sub_commands"></a>7. Sub-commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A common program pattern is to have a single "shell" program that performs
various independent commands. For example you have <code>git commit..</code>,
<code>git push..</code>, and so on. It&#8217;s possible to create such sub-command parsers in
Lyra with the use of <code>arguments</code>, <code>group</code> and <code>literal</code> parsers manually. But
as this is a very common use case the library provides a convenience group
parser for the occasion.</p>
</div>
<div class="paragraph">
<p>In this example we use two <code>command</code> parameters to specify the sub-commands and
a lambda to execute the subcommands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;vector&gt;</span><span class="tok-cp"></span>

<span class="tok-c1">// Run a process, sub-command data.</span>
<span class="tok-k">struct</span> <span class="tok-n">run_command</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">vector</span><span class="tok-o">&lt;</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&gt;</span> <span class="tok-n">command</span><span class="tok-p">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="tok-kt">bool</span> <span class="tok-n">verbose</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">show_help</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>

    <span class="tok-n">run_command</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span> <span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tok-p">{</span>
        <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
            <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">command</span><span class="tok-p">(</span><span class="tok-s">&quot;run&quot;</span><span class="tok-p">,</span>
                <span class="tok-p">[</span><span class="tok-k">this</span><span class="tok-p">](</span><span class="tok-k">const</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span> <span class="tok-o">&amp;</span> <span class="tok-n">g</span><span class="tok-p">)</span> <span class="tok-p">{</span> <span class="tok-k">this</span><span class="tok-o">-&gt;</span><span class="tok-n">do_command</span><span class="tok-p">(</span><span class="tok-n">g</span><span class="tok-p">);</span> <span class="tok-p">})</span> <i class="conum" data-value="4"></i><b>(4)</b>
                <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;Execute the given command.&quot;</span><span class="tok-p">)</span>
                <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">))</span>
                <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
                    <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">verbose</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;-v&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--verbose&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">optional</span><span class="tok-p">()</span>
                        <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span>
                            <span class="tok-s">&quot;Show additional output as to what we are doing.&quot;</span><span class="tok-p">))</span>
                <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
                    <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">arg</span><span class="tok-p">(</span><span class="tok-n">command</span><span class="tok-p">,</span> <span class="tok-s">&quot;command&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">required</span><span class="tok-p">()</span>
                        <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span>
                            <span class="tok-s">&quot;The command, and arguments, to attempt to run.&quot;</span><span class="tok-p">)));</span>
    <span class="tok-p">}</span>

    <span class="tok-kt">void</span> <span class="tok-n">do_command</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span> <span class="tok-o">&amp;</span> <span class="tok-n">g</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">)</span>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">g</span><span class="tok-p">;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tok-k">else</span>
        <span class="tok-p">{</span>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;RUN: &quot;</span>
                      <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;verbose=&quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-n">verbose</span> <span class="tok-o">?</span> <span class="tok-s">&quot;true&quot;</span> <span class="tok-o">:</span> <span class="tok-s">&quot;false&quot;</span><span class="tok-p">);</span>
            <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-k">auto</span> <span class="tok-nl">c</span> <span class="tok-p">:</span> <span class="tok-n">command</span><span class="tok-p">)</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot; &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">c</span><span class="tok-p">;</span>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span>
<span class="tok-p">};</span>

<span class="tok-c1">// Kill a named process, sub-command data.</span>
<span class="tok-k">struct</span> <span class="tok-n">kill_command</span> <i class="conum" data-value="6"></i><b>(6)</b>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">process_name</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <span class="tok-n">signal</span> <span class="tok-o">=</span> <span class="tok-mi">9</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">show_help</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>

    <span class="tok-n">kill_command</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span> <span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
            <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">command</span><span class="tok-p">(</span>
                <span class="tok-s">&quot;kill&quot;</span><span class="tok-p">,</span> <span class="tok-p">[</span><span class="tok-k">this</span><span class="tok-p">](</span><span class="tok-k">const</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span> <span class="tok-o">&amp;</span> <span class="tok-n">g</span><span class="tok-p">)</span> <span class="tok-p">{</span> <span class="tok-k">this</span><span class="tok-o">-&gt;</span><span class="tok-n">do_command</span><span class="tok-p">(</span><span class="tok-n">g</span><span class="tok-p">);</span> <span class="tok-p">})</span>
                <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;Terminate the process with the given name.&quot;</span><span class="tok-p">)</span>
                <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">))</span>
                <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
                    <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">signal</span><span class="tok-p">,</span> <span class="tok-s">&quot;signal&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;-s&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--signal&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">optional</span><span class="tok-p">()</span>
                        <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span>
                            <span class="tok-s">&quot;The signal integer to post to the running process.&quot;</span><span class="tok-p">))</span>
                <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
                    <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">arg</span><span class="tok-p">(</span><span class="tok-n">process_name</span><span class="tok-p">,</span> <span class="tok-s">&quot;process_name&quot;</span><span class="tok-p">)</span>
                        <span class="tok-p">.</span><span class="tok-n">required</span><span class="tok-p">()</span>
                        <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span>
                            <span class="tok-s">&quot;The name of the process to search and signal.&quot;</span><span class="tok-p">)));</span>
    <span class="tok-p">}</span>

    <span class="tok-kt">void</span> <span class="tok-n">do_command</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span> <span class="tok-o">&amp;</span> <span class="tok-n">g</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">)</span>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">g</span><span class="tok-p">;</span>
        <span class="tok-k">else</span>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;KILL:&quot;</span>
                      <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot; signal=&quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">signal</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot; process=&quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">process_name</span>
                      <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
<span class="tok-p">};</span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">();</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">command</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <span class="tok-n">show_help</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
    <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">));</span>
    <span class="tok-n">kill_command</span> <span class="tok-n">kill</span> <span class="tok-p">{</span> <span class="tok-n">cli</span> <span class="tok-p">};</span>
    <span class="tok-n">run_command</span> <span class="tok-n">run</span> <span class="tok-p">{</span> <span class="tok-n">cli</span> <span class="tok-p">};</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span> <i class="conum" data-value="7"></i><b>(7)</b>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">show_help</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">cli</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span> <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-n">result</span> <span class="tok-o">?</span> <span class="tok-mi">0</span> <span class="tok-o">:</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A simple <code>struct</code> for information on the sub-commands. First for our <code>run</code>
sub-command.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The arguments for the sub-command.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The constructor defines the additional arguments for the sub-command in
the given <code>cli</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Each sub-command sets a callback for when the group is successfully
parsed which tells us we have a valid command to respond to.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We specified a sub-command specific help option. Here we can check for it
and print out the help for the <code>group</code> only. This help will look similar
to the full help output, but only contains the <code>group</code> arguments.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>And now the information for our <code>kill</code> sub-comand.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>We go ahead and parse the top-level <code>cli</code> which will also parse the
sub-command groups.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>At the end we can do the regular error handling.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_argument_groups"><a class="anchor" href="#_argument_groups"></a>8. Argument Groups</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are times when some CLI arguments only make sense when considered as a
collection. A common case for this are commands. But it also comes up in any
case where some arguments are all required, but only if one of them is present.
Lets take the example of specifying the dimension of a window. For example one
could expect both <code>--width=X</code> and <code>--height=Y</code> options. But you could make them
optional, as a group, in favor of an automatic screen sized window of a
particular aspect ratio with a <code>--aspect=R</code> option. In such a case we would
want to allow either one of these to be specified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">exec</span> <span class="tok-o">--</span><span class="tok-n">width</span><span class="tok-o">=</span><span class="tok-mi">1440</span> <span class="tok-o">--</span><span class="tok-n">height</span><span class="tok-o">=</span><span class="tok-mi">720</span>
<span class="tok-n">exec</span> <span class="tok-o">--</span><span class="tok-n">aspect</span><span class="tok-o">=</span><span class="tok-mf">1.78</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With argument groups we can allow such an arrangement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;string&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;vector&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-c1">// Default to showing a full screen 4/3 aspect</span>
    <span class="tok-kt">bool</span> <span class="tok-n">show_full_screen</span> <span class="tok-o">=</span> <span class="tok-nb">true</span><span class="tok-p">;</span>
    <span class="tok-kt">float</span> <span class="tok-n">aspect</span> <span class="tok-o">=</span> <span class="tok-mf">4.0f</span> <span class="tok-o">/</span> <span class="tok-mf">3.0f</span><span class="tok-p">;</span>

    <span class="tok-c1">// If it&#39;s not full screen the size will be specified.</span>
    <span class="tok-kt">unsigned</span> <span class="tok-n">width</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-kt">unsigned</span> <span class="tok-n">height</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

    <span class="tok-c1">// Did the user ask for help?</span>
    <span class="tok-kt">bool</span> <span class="tok-n">get_help</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>

    <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span> <span class="tok-n">cli</span><span class="tok-p">;</span>
    <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-n">get_help</span><span class="tok-p">))</span>
        <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">aspect</span><span class="tok-p">,</span> <span class="tok-s">&quot;aspect&quot;</span><span class="tok-p">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
                          <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--aspect&quot;</span><span class="tok-p">)</span>
                          <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;Full-screen aspect ratio window.&quot;</span><span class="tok-p">))</span>
        <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span><span class="tok-p">([</span><span class="tok-o">&amp;</span><span class="tok-p">](</span><span class="tok-k">const</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span> <span class="tok-o">&amp;</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                          <span class="tok-n">show_full_screen</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
                      <span class="tok-p">})</span> <i class="conum" data-value="2"></i><b>(2)</b>
                          <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">width</span><span class="tok-p">,</span> <span class="tok-s">&quot;width&quot;</span><span class="tok-p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
                                            <span class="tok-p">.</span><span class="tok-n">required</span><span class="tok-p">()</span>
                                            <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--width&quot;</span><span class="tok-p">)</span>
                                            <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;Width of window.&quot;</span><span class="tok-p">))</span>
                          <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">height</span><span class="tok-p">,</span> <span class="tok-s">&quot;height&quot;</span><span class="tok-p">)</span>
                                            <span class="tok-p">.</span><span class="tok-n">required</span><span class="tok-p">()</span> <i class="conum" data-value="4"></i><b>(4)</b>
                                            <span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--height&quot;</span><span class="tok-p">)</span>
                                            <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;Height of window.&quot;</span><span class="tok-p">)));</span>

    <span class="tok-c1">// Parse the program arguments.</span>
    <span class="tok-k">auto</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">parse</span><span class="tok-p">({</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span> <span class="tok-p">});</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">get_help</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">cli</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-c1">// Check that the arguments where valid.</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">result</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cerr</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Error in command line: &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">errorMessage</span><span class="tok-p">()</span>
                  <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
        <span class="tok-k">return</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">show_full_screen</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Full screen aspect = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">aspect</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">else</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;Window size = &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">width</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot; x &quot;</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">height</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>

    <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>ratio</code> option is a regular value argument.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The group for the window size turns off the full screen mode when the size
options are fully specified.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We add the <code>width</code> and <code>height</code> options to the group.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We specify both the <code>width</code> and <code>height</code> as required to ensure we get only
a valid specification when both are present. Otherwise the group is
ignored as optional.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_main"><a class="anchor" href="#_main"></a>9. Main</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For many cases specifying a help option, handling it, and specifying additional
arguments introduces boilerplate that can get in the way of managing "easy"
command lines. The <code>lyra::main</code> class abstract most of that boilerplate to make
it trivial to create and handle a command line.</p>
</div>
<div class="paragraph">
<p>In this example we define and use two options and one positional argument. It
then executes the lambda with the parsed command line as given by <code>argv</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">main</span><span class="tok-p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tok-p">(</span><span class="tok-s">&quot;-x&quot;</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">)(</span><span class="tok-s">&quot;-y&quot;</span><span class="tok-p">,</span> <span class="tok-mi">0</span><span class="tok-p">)(</span><span class="tok-s">&quot;z&quot;</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">)</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tok-p">(</span><span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span><span class="tok-p">,</span> <span class="tok-p">[](</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">m</span><span class="tok-p">)</span> <span class="tok-p">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">(</span><span class="tok-n">m</span><span class="tok-p">[</span><span class="tok-s">&quot;-x&quot;</span><span class="tok-p">])</span> <span class="tok-o">+</span> <span class="tok-kt">int</span><span class="tok-p">(</span><span class="tok-n">m</span><span class="tok-p">[</span><span class="tok-s">&quot;-y&quot;</span><span class="tok-p">]))</span> <span class="tok-o">*</span> <span class="tok-kt">int</span><span class="tok-p">(</span><span class="tok-n">m</span><span class="tok-p">[</span><span class="tok-s">&quot;z&quot;</span><span class="tok-p">])</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span> <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tok-p">});</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the <code>lyra::main</code> utility by creating an instance of it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Define two options and one positional argument. Each one defines the one
option, or hint, and the default value (and type of value).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Define and execute the body of the program passed in as a lambda.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Access the individual options and argument from any of their names or hint.
Each is converted to the specified type (<code>int</code> in this case).</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Return an appropriate value that is also return from <code>main</code> entry function.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_main"><a class="anchor" href="#_more_main"></a>10. More Main</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the simple <code>lyra::main</code> interface can&#8217;t possibly cover the variety of use
cases people want. In particular when it comes to the options and arguments.
For that teh <code>lyra::main</code> interface supports adding instances of the regular
option and argument parsers.</p>
</div>
<div class="paragraph">
<p>In this example we define and use two options and one positional argument, as
before. But we use <code>lyra::opt</code> and <code>lyra::arg</code> specifications. We also use
the <code>lyra::val</code> value holder to provide the location for the parsed value
and it&#8217;s parsed type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#include</span> <span class="tok-cpf">&lt;iostream&gt;</span><span class="tok-cp"></span>
<span class="tok-cp">#include</span> <span class="tok-cpf">&lt;lyra/lyra.hpp&gt;</span><span class="tok-cp"></span>

<span class="tok-kt">int</span> <span class="tok-nf">main</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">main</span><span class="tok-p">()</span>
        <span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">val</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">),</span> <span class="tok-s">&quot;x&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;-x&quot;</span><span class="tok-p">])</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">val</span><span class="tok-p">(</span><span class="tok-mi">0</span><span class="tok-p">),</span> <span class="tok-s">&quot;y&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;-y&quot;</span><span class="tok-p">])</span>
        <span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">arg</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">val</span><span class="tok-p">(</span><span class="tok-mi">5</span><span class="tok-p">),</span> <span class="tok-s">&quot;z&quot;</span><span class="tok-p">))</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="tok-p">(</span><span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-n">argv</span><span class="tok-p">,</span> <span class="tok-p">[](</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">m</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">(</span><span class="tok-n">m</span><span class="tok-p">[</span><span class="tok-s">&quot;-x&quot;</span><span class="tok-p">])</span> <span class="tok-o">+</span> <span class="tok-kt">int</span><span class="tok-p">(</span><span class="tok-n">m</span><span class="tok-p">[</span><span class="tok-s">&quot;-y&quot;</span><span class="tok-p">]))</span><span class="tok-o">*</span><span class="tok-kt">int</span><span class="tok-p">(</span><span class="tok-n">m</span><span class="tok-p">[</span><span class="tok-s">&quot;z&quot;</span><span class="tok-p">])</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">&quot;</span><span class="tok-se">\n</span><span class="tok-s">&quot;</span><span class="tok-p">;</span>
            <span class="tok-k">return</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
        <span class="tok-p">});</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add the "-x" option as an integer with a default of <code>0</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The positional argument in this case has a default of <code>5</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reference"><a class="anchor" href="#_reference"></a>11. Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="lyra_parser_customization"><a class="anchor" href="#lyra_parser_customization"></a>11.1. <code>lyra::parser_customization</code></h3>
<div class="paragraph">
<p>Customization interface for parsing of options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">token_delimiters</span><span class="tok-p">()</span> <span class="tok-k">const</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies the characters to use for splitting a cli argument into the option
and its value (if any).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">option_prefix</span><span class="tok-p">()</span> <span class="tok-k">const</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies the characters to use as possible prefix, either single or double,
for all options.</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_default_parser_customization"><a class="anchor" href="#lyra_default_parser_customization"></a>11.2. <code>lyra::default_parser_customization</code></h3>
<div class="paragraph">
<p>Is-a <code>lyra::parser_customization</code> that defines token delimiters as space (" ")
or equal (<code>=</code>). And specifies the option prefix character as dash (<code>-</code>)
resulting in long options with <code>--</code> and short options with <code>-</code>.</p>
</div>
<div class="paragraph">
<p>This customization is used as the default if none is given.</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_parser_result"><a class="anchor" href="#lyra_parser_result"></a>11.3. <code>lyra::parser_result</code></h3>
<div class="paragraph">
<p>The result of parsing arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_parser"><a class="anchor" href="#lyra_parser"></a>11.4. <code>lyra::parser</code></h3>
<div class="paragraph">
<p>Base for all argument parser types.</p>
</div>
<div class="sect3">
<h4 id="lyra_parser_specification"><a class="anchor" href="#lyra_parser_specification"></a>11.4.1. Specification</h4>
<div class="sect4">
<h5 id="lyra_parser_help_text_item"><a class="anchor" href="#lyra_parser_help_text_item"></a>11.4.1.1. <code>lyra::parser::help_text_item</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">struct</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">parser</span><span class="tok-o">::</span><span class="tok-n">help_text_item</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">option</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">description</span><span class="tok-p">;</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Holds the help information for a single argument option. The <code>option</code> member is
the long name of the option. And the <code>description</code> is the text describing the
option. A list of them is returned from the <code>lyra::parser::get_help_text</code>
method.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_parser_help_text"><a class="anchor" href="#lyra_parser_help_text"></a>11.4.1.2. <code>lyra::parser::help_text</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">using</span> <span class="tok-n">help_text</span> <span class="tok-o">=</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">vector</span><span class="tok-o">&lt;</span><span class="tok-n">help_text_item</span><span class="tok-o">&gt;</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The set of help texts for any options in the sub-parsers to this one, if any.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_parser_get_help_text"><a class="anchor" href="#lyra_parser_get_help_text"></a>11.4.1.3. <code>lyra::parser::get_help_text</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">virtual</span> <span class="tok-n">help_text</span> <span class="tok-nf">get_help_text</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Collects, and returns, the set of help items for the sub-parser arguments in
this parser, if any. The default is to return an empty set. Which is what most
parsers will return. Parsers like <code>arguments</code>, <code>group</code>, and <code>cli</code> will return a
set for the arguments defined. This is called to print out the help text from
the stream operator.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_parser_get_usage_text"><a class="anchor" href="#lyra_parser_get_usage_text"></a>11.4.1.4. <code>lyra::parser::get_usage_text</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">get_usage_text</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the formatted <code>USAGE</code> text for this parser, and any contained
sub-parsers. This is called to print out the help text from the stream operator.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_parser_get_description_text"><a class="anchor" href="#lyra_parser_get_description_text"></a>11.4.1.5. <code>lyra::parser::get_description_text</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">virtual</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">get_description_text</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the description text for this, and any contained sub-parsers. This is
called to print out the help text from the stream operator.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_composable_parser"><a class="anchor" href="#lyra_composable_parser"></a>11.5. <code>lyra::composable_parser</code></h3>
<div class="paragraph">
<p>A parser that can be composed with other parsers using <code>operator|</code>. Composing
two <code>composable_parser</code> instances generates a <code>cli</code> parser.</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_bound_parser"><a class="anchor" href="#lyra_bound_parser"></a>11.6. <code>lyra::bound_parser</code></h3>
<div class="paragraph">
<p>Parser that binds a variable reference or callback to the value of an argument.</p>
</div>
<div class="sect3">
<h4 id="lyra_bound_parser_ctor"><a class="anchor" href="#lyra_bound_parser_ctor"></a>11.6.1. Construction</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Reference</span><span class="tok-o">&gt;</span>
<span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">bound_parser</span><span class="tok-p">(</span><span class="tok-n">Reference</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">,</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">hint</span><span class="tok-p">);</span>

<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Lambda</span><span class="tok-o">&gt;</span>
<span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">bound_parser</span><span class="tok-p">(</span><span class="tok-n">Lambda</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">,</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">hint</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a value option with a target typed variable or callback. These are
options that take a value as in <code>--opt=value</code>. In the first form the given
<code>ref</code> receives the value of the option after parsing. The second form the
callback is called during the parse with the given value. Both take a
<code>hint</code> that is used in the help text. When the option can be specified
multiple times the callback will be called consecutively for each option value
given. And if a container is given as a reference on the first form it will
contain all the specified values.</p>
</div>
</div>
<div class="sect3">
<h4 id="lyra_bound_parser_specification"><a class="anchor" href="#lyra_bound_parser_specification"></a>11.6.2. Specification</h4>
<div class="sect4">
<h5 id="lyra_bound_parser_help"><a class="anchor" href="#lyra_bound_parser_help"></a>11.6.2.1. <code>lyra::bound_parser::help</code>, <code>lyra::bound_parser::operator(help)</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-n">Derived</span><span class="tok-o">&amp;</span> <span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">text</span><span class="tok-p">);</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-n">Derived</span><span class="tok-o">&amp;</span> <span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">help</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Defines the help description of an argument.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_bound_parser_optional"><a class="anchor" href="#lyra_bound_parser_optional"></a>11.6.2.2. <code>lyra::bound_parser::optional</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-n">Derived</span><span class="tok-o">&amp;</span> <span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">optional</span><span class="tok-p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Indicates that the argument is optional. This is equivalent to specifying
<code>cardinality(0, 1)</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_bound_parser_required"><a class="anchor" href="#lyra_bound_parser_required"></a>11.6.2.3. <code>lyra::bound_parser::required(n)</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-n">Derived</span><span class="tok-o">&amp;</span> <span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">required</span><span class="tok-p">(</span><span class="tok-kt">size_t</span> <span class="tok-n">n</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies that the argument needs to given the number of <code>n</code> times
(defaults to <strong>1</strong>).</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_bound_parser_cardinality"><a class="anchor" href="#lyra_bound_parser_cardinality"></a>11.6.2.4. <code>lyra::bound_parser::cardinality(n, m)</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-n">Derived</span><span class="tok-o">&amp;</span> <span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">cardinality</span><span class="tok-p">(</span><span class="tok-kt">size_t</span> <span class="tok-n">n</span><span class="tok-p">);</span>

<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-n">Derived</span><span class="tok-o">&amp;</span> <span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">cardinality</span><span class="tok-p">(</span><span class="tok-kt">size_t</span> <span class="tok-n">n</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">m</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies the number of times the argument can and needs to appear in the list
of arguments. In the first form the argument can appear exactly <code>n</code> times. In
the second form it specifies that the argument can appear from <code>n</code> to <code>m</code> times
inclusive.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_bound_parser_choices"><a class="anchor" href="#lyra_bound_parser_choices"></a>11.6.2.5. <code>lyra::bound_parser::choices</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">T</span><span class="tok-p">,</span> <span class="tok-k">typename</span><span class="tok-p">...</span> <span class="tok-n">Rest</span><span class="tok-o">&gt;</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">&amp;</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">choices</span><span class="tok-p">(</span><span class="tok-n">T</span> <span class="tok-n">val0</span><span class="tok-p">,</span> <span class="tok-n">Rest</span><span class="tok-p">...</span> <span class="tok-n">rest</span><span class="tok-p">)</span>

<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Derived</span><span class="tok-o">&gt;</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Lambda</span><span class="tok-o">&gt;</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">&amp;</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">bound_parser</span><span class="tok-o">&lt;</span><span class="tok-n">Derived</span><span class="tok-o">&gt;::</span><span class="tok-n">choices</span><span class="tok-p">(</span><span class="tok-n">Lambda</span> <span class="tok-k">const</span> <span class="tok-o">&amp;</span><span class="tok-n">check_choice</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Limit the allowed values of an argument. In the first form the value is
limited to the ones listed in the call (two or more values). In the second
form the <code>check_choice</code> function is called with the parsed value and returns
<code>true</code> if it&#8217;s an allowed value.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_cli"><a class="anchor" href="#lyra_cli"></a>11.7. <code>lyra::cli</code></h3>
<div class="paragraph">
<p>A Combined parser made up of any two or more other parsers. Creating and using
one of these as a basis one can incrementally compose other parsers into this
one. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">auto</span> <span class="tok-n">cli</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">();</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">what</span><span class="tok-p">;</span>
<span class="tok-kt">float</span> <span class="tok-n">when</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">where</span><span class="tok-p">;</span>
<span class="tok-n">cli</span> <span class="tok-o">|=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">what</span><span class="tok-p">,</span> <span class="tok-s">&quot;what&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;--make-it-so&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;Make it so.&quot;</span><span class="tok-p">).</span><span class="tok-n">required</span><span class="tok-p">();</span>
<span class="tok-n">cli</span> <span class="tok-o">|=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">when</span><span class="tok-p">.</span> <span class="tok-s">&quot;when&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;--time&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;When to do &lt;what&gt;.&quot;</span><span class="tok-p">).</span><span class="tok-n">optional</span><span class="tok-p">();</span>
<span class="tok-n">cli</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">where</span><span class="tok-p">,</span> <span class="tok-s">&quot;where&quot;</span><span class="tok-p">).</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--where&quot;</span><span class="tok-p">)</span>
    <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;There you are.&quot;</span><span class="tok-p">).</span><span class="tok-n">optional</span><span class="tok-p">());</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="lyra_cli_ctor"><a class="anchor" href="#lyra_cli_ctor"></a>11.7.1. Construction</h4>
<div class="sect4">
<h5 id="lyra_cli_ctor_default"><a class="anchor" href="#lyra_cli_ctor_default"></a>11.7.1.1. Default</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">cli</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-k">default</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Default constructing a <code>cli</code> is the starting point to adding arguments
and options for parsing a command line.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_cli_ctor_copy"><a class="anchor" href="#lyra_cli_ctor_copy"></a>11.7.1.2. Copy</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">cli</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lyra_cli_specification"><a class="anchor" href="#lyra_cli_specification"></a>11.7.2. Specification</h4>
<div class="sect4">
<h5 id="lyra_cli_add_argument"><a class="anchor" href="#lyra_cli_add_argument"></a>11.7.2.1. <code>lyra::cli::add_argument</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">exe_name</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">exe_name</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">exe_name</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">exe_name</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">parser</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">parser</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">group</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">group</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">cli</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span>
<span class="tok-n">cli</span><span class="tok-o">&amp;</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">cli</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds the given argument parser to the considered arguments for this
<code>cli</code>. Depending on the parser given it will be: recorded as the exe
name (for <code>exe_name</code> parser), directly added as an argument (for
<code>parser</code>), or add the parsers from another <code>cli</code> to this one.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_cli_array_ref"><a class="anchor" href="#lyra_cli_array_ref"></a>11.7.2.2. <code>lyra::cli::operator[]</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">value_result</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">[](</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finds the given argument by either option name or hint name and returns a
convertible reference to the value, either the one provided by the user or the
default.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_cli_parse"><a class="anchor" href="#lyra_cli_parse"></a>11.7.2.3. <code>lyra::cli::parse</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">parse_result</span> <span class="tok-n">cli</span><span class="tok-o">::</span><span class="tok-n">parse</span><span class="tok-p">(</span>
    <span class="tok-n">args</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">args</span><span class="tok-p">,</span> <span class="tok-n">parser_customization</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">customize</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Parses given arguments <code>args</code> and optional parser customization <code>customize</code>.
The result indicates success or failure, and if failure what kind of failure
it was. The state of variables bound to options is unspecified and any bound
callbacks may have been called.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_opt"><a class="anchor" href="#lyra_opt"></a>11.8. <code>lyra::opt</code></h3>
<div class="paragraph">
<p>A parser for one option with multiple possible names. The option value(s) are
communicated through a reference to a variable, a container, or a callback.</p>
</div>
<div class="paragraph">
<p>Is-a <a href="#lyra_bound_parser"><code>lyra::bound_parser</code></a>.</p>
</div>
<div class="sect3">
<h4 id="lyra_opt_ctor"><a class="anchor" href="#lyra_opt_ctor"></a>11.8.1. Construction</h4>
<div class="sect4">
<h5 id="lyra_opt_ctor_flags"><a class="anchor" href="#lyra_opt_ctor_flags"></a>11.8.1.1. Flags</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-kt">bool</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">);</span>

<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">L</span><span class="tok-o">&gt;</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">L</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a flag option with a target <code>bool</code> to indicate if the flag is
present. The first form takes a reference to a variable to receive the
<code>bool</code>. The second takes a callback that is called with <code>true</code> when the
option is present.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_opt_ctor_values"><a class="anchor" href="#lyra_opt_ctor_values"></a>11.8.1.2. Values</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">T</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">,</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">hint</span><span class="tok-p">);</span>

<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">L</span><span class="tok-o">&gt;</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">L</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">,</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">hint</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Constructs a value option with a target <code>ref</code>. The first form takes a reference
to a variable to receive the value. The second takes a callback that is called
with the value when the option is present.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lyra_opt_specification"><a class="anchor" href="#lyra_opt_specification"></a>11.8.2. Specification</h4>
<div class="sect4">
<h5 id="lyra_opt_name"><a class="anchor" href="#lyra_opt_name"></a>11.8.2.1. <code>lyra::opt::name</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">&amp;</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span><span class="tok-n">opt_name</span><span class="tok-p">)</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">&amp;</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">[](</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span><span class="tok-n">optName</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Add a spelling for the option of the form <code>--&lt;name&gt;</code> or <code>-n</code>.
One can add multiple short spellings at once with <code>-abc</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_arg"><a class="anchor" href="#lyra_arg"></a>11.9. <code>lyra::arg</code></h3>
<div class="paragraph">
<p>A parser for regular arguments, i.e. not <code>--</code> or <code>-</code> prefixed. This is simply
a way to get values of arguments directly specified in the cli.</p>
</div>
<div class="paragraph">
<p>Is-a <a href="#lyra_bound_parser"><code>lyra::bound_parser</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_help"><a class="anchor" href="#lyra_help"></a>11.10. <code>lyra::help</code></h3>
<div class="paragraph">
<p>Utility function that defines a default <code>--help</code> option. You can specify a
<code>bool</code> flag to indicate if the help option was specified and that you could
display a help message.</p>
</div>
<div class="paragraph">
<p>The option accepts <code>-?</code>, <code>-h</code>, and <code>--help</code> as allowed option names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">help</span> <span class="tok-o">&amp;</span> <span class="tok-n">help</span><span class="tok-o">::</span><span class="tok-n">description</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span><span class="tok-n">text</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the given <code>text</code> as the general description to show with the help and
usage output for CLI parser. This text is displayed between the "Usage"
and "Options, arguments" sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_exe_name"><a class="anchor" href="#lyra_exe_name"></a>11.11. <code>lyra::exe_name</code></h3>
<div class="paragraph">
<p>Specifies the name of the executable.</p>
</div>
<div class="paragraph">
<p>Is-a <a href="#lyra_composable_parser"><code>lyra::composable_parser</code></a>.</p>
</div>
<div class="sect3">
<h4 id="lyra_exe_name_ctor"><a class="anchor" href="#lyra_exe_name_ctor"></a>11.11.1. Construction</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">exe_name</span><span class="tok-o">::</span><span class="tok-n">exe_name</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&amp;</span> <span class="tok-n">ref</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Constructs with a target string to receive the name of the executable. When
the <code>cli</code> is run the target string will contain the exec name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">LambdaT</span><span class="tok-o">&gt;</span>
<span class="tok-n">exe_name</span><span class="tok-o">::</span><span class="tok-n">exe_name</span><span class="tok-p">(</span><span class="tok-n">LambdaT</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">lambda</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Construct with a callback that is called with the value of the executable name
when the <code>cli</code> runs.</p>
</div>
</div>
<div class="sect3">
<h4 id="lyra_exe_name_accessors"><a class="anchor" href="#lyra_exe_name_accessors"></a>11.11.2. Accessors</h4>
<div class="sect4">
<h5 id="lyra_exe_name_name"><a class="anchor" href="#lyra_exe_name_name"></a>11.11.2.1. <code>lyra::exe_name::name</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">exe_name</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-k">const</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the executable name when available. Otherwise it returns a default
value.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_exe_name_set"><a class="anchor" href="#lyra_exe_name_set"></a>11.11.2.2. <code>lyra::exe_name::set</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">parser_result</span> <span class="tok-n">exe_name</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">newName</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the executable name with the <code>newName</code> value. The new value is reflected
in the bound string reference or callback.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_args"><a class="anchor" href="#lyra_args"></a>11.12. <code>lyra::args</code></h3>
<div class="paragraph">
<p>Transport for raw args (copied from main args, supplied via init list, or from a
pair of iterators).</p>
</div>
</div>
<div class="sect2">
<h3 id="lyra_arguments"><a class="anchor" href="#lyra_arguments"></a>11.13. <code>lyra::arguments</code></h3>
<div class="paragraph">
<p>A Combined parser made up of any number of parsers. Creating and using
one of these as a basis one can incrementally compose other parsers into this
one. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">auto</span> <span class="tok-n">p</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">arguments</span><span class="tok-p">();</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">what</span><span class="tok-p">;</span>
<span class="tok-kt">float</span> <span class="tok-n">when</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">where</span><span class="tok-p">;</span>
<span class="tok-n">p</span> <span class="tok-o">|=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">what</span><span class="tok-p">,</span> <span class="tok-s">&quot;what&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;--make-it-so&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;Make it so.&quot;</span><span class="tok-p">).</span><span class="tok-n">required</span><span class="tok-p">();</span>
<span class="tok-n">p</span> <span class="tok-o">|=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">when</span><span class="tok-p">.</span> <span class="tok-s">&quot;when&quot;</span><span class="tok-p">)[</span><span class="tok-s">&quot;--time&quot;</span><span class="tok-p">](</span><span class="tok-s">&quot;When to do &lt;what&gt;.&quot;</span><span class="tok-p">).</span><span class="tok-n">optional</span><span class="tok-p">();</span>
<span class="tok-n">p</span><span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">opt</span><span class="tok-p">(</span><span class="tok-n">where</span><span class="tok-p">,</span> <span class="tok-s">&quot;where&quot;</span><span class="tok-p">).</span><span class="tok-n">name</span><span class="tok-p">(</span><span class="tok-s">&quot;--where&quot;</span><span class="tok-p">)</span>
    <span class="tok-p">.</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-s">&quot;There you are.&quot;</span><span class="tok-p">).</span><span class="tok-n">optional</span><span class="tok-p">());</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="lyra_arguments_ctor"><a class="anchor" href="#lyra_arguments_ctor"></a>11.13.1. Construction</h4>
<div class="sect4">
<h5 id="lyra_arguments_ctor_default"><a class="anchor" href="#lyra_arguments_ctor_default"></a>11.13.1.1. Default</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">arguments</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-k">default</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Default constructing a <code>arguments</code> is the starting point to adding arguments
and options for parsing a arguments line.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_arguments_ctor_copy"><a class="anchor" href="#lyra_arguments_ctor_copy"></a>11.13.1.2. Copy</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-n">arguments</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">arguments</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lyra_arguments_specification"><a class="anchor" href="#lyra_arguments_specification"></a>11.13.2. Specification</h4>
<div class="sect4">
<h5 id="lyra_arguments_add_argument"><a class="anchor" href="#lyra_arguments_add_argument"></a>11.13.2.1. <code>lyra::arguments::add_argument</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">arguments</span><span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">parser</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-n">arguments</span><span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">parser</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-n">arguments</span><span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">arguments</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span>
<span class="tok-n">arguments</span><span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">arguments</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds the given argument parser to the considered arguments for this
<code>arguments</code>. Depending on the parser given it will be: directly added as an
argument (for <code>parser</code>), or add the parsers from another <code>arguments</code> to
this one.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lyraargumentssequential"><a class="anchor" href="#_lyraargumentssequential"></a>11.13.2.2. <code>lyra::arguments::sequential</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">arguments</span> <span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-n">sequential</span><span class="tok-p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the parsing mode for the arguments to "sequential". When parsing the
arguments they will be, greedily, consumed in the order they where added.
This is useful for sub-commands and structured command lines.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lyraargumentsinclusive"><a class="anchor" href="#_lyraargumentsinclusive"></a>11.13.2.3. <code>lyra::arguments::inclusive</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">arguments</span> <span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-n">inclusive</span><span class="tok-p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the parsing mode for the arguments to "inclusively any". This is the
default that attempts to match each parsed argument with all the available
parsers. This means that there is no ordering enforced.</p>
</div>
</div>
<div class="sect4">
<h5 id="_lyraargumentsget"><a class="anchor" href="#_lyraargumentsget"></a>11.13.2.4. <code>lyra::arguments::get</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span>
<span class="tok-n">T</span> <span class="tok-o">&amp;</span> <span class="tok-n">arguments</span><span class="tok-o">::</span><span class="tok-n">get</span><span class="tok-p">(</span><span class="tok-kt">size_t</span> <span class="tok-n">i</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Get a modifyable reference to one of the parsers specified.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_literal"><a class="anchor" href="#lyra_literal"></a>11.14. <code>lyra::literal</code></h3>
<div class="paragraph">
<p>A parser that matches a single fixed value.</p>
</div>
<div class="paragraph">
<p>Is-a <a href="#lyra_parser"><code>lyra::parser</code></a>.</p>
</div>
<div class="sect3">
<h4 id="lyra_literal_ctor"><a class="anchor" href="#lyra_literal_ctor"></a>11.14.1. Construction</h4>
<div class="sect4">
<h5 id="_token"><a class="anchor" href="#_token"></a>11.14.1.1. Token</h5>
<div id="lyra_literal_ctor_token" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kr">inline</span> <span class="tok-n">literal</span><span class="tok-o">::</span><span class="tok-n">literal</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Constructs the literal with the name of the token to match.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lyra_literal_specification"><a class="anchor" href="#lyra_literal_specification"></a>11.14.2. Specification</h4>
<div class="sect4">
<h5 id="lyra_literal_help"><a class="anchor" href="#lyra_literal_help"></a>11.14.2.1. <code>lyra:literal::help</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">literal</span><span class="tok-o">&amp;</span> <span class="tok-n">literal</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&amp;</span> <span class="tok-n">text</span><span class="tok-p">)</span>
<span class="tok-n">literal</span><span class="tok-o">&amp;</span> <span class="tok-n">literal</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">description</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specify a help description for the literal.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_group"><a class="anchor" href="#lyra_group"></a>11.15. <code>lyra::group</code></h3>
<div class="paragraph">
<p>A group of arguments provides for parsing, optionally, a set of arguments
together. The group itself is considered successfully parsed only when the
arguments in the group are parsed without errors. A common use case for this
are sub-commands. This implementation is recursive. And hence allows groups
within groups for describing branching argument parsing.</p>
</div>
<div class="paragraph">
<p>Is-a <a href="#lyra_arguments"><code>lyra::arguments</code></a>.</p>
</div>
<div class="sect3">
<h4 id="lyra_group_ctor"><a class="anchor" href="#lyra_group_ctor"></a>11.15.1. Construction</h4>
<div class="sect4">
<h5 id="lyra_group_ctor_default"><a class="anchor" href="#lyra_group_ctor_default"></a>11.15.1.1. Default</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">group</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-k">default</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Default constructing a <code>group</code> does not register the success callback.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_group_ctor_copy"><a class="anchor" href="#lyra_group_ctor_copy"></a>11.15.1.2. Copy</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">group</span><span class="tok-o">::</span><span class="tok-n">group</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">group</span><span class="tok-o">&amp;</span> <span class="tok-n">other</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="lyra_group_ctor_success"><a class="anchor" href="#lyra_group_ctor_success"></a>11.15.1.3. Success Handler</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">group</span><span class="tok-o">::</span><span class="tok-n">group</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">function</span><span class="tok-o">&lt;</span><span class="tok-kt">void</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">group</span> <span class="tok-o">&amp;</span><span class="tok-p">)</span><span class="tok-o">&gt;</span> <span class="tok-o">&amp;</span> <span class="tok-n">f</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Registers a function to call when the group is successfully parsed. The
function is called with the group to facilitate customization.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_command"><a class="anchor" href="#lyra_command"></a>11.16. <code>lyra::command</code></h3>
<div class="paragraph">
<p>A parser that encapsulates the pattern of parsing sub-commands. It provides a
quick wrapper for the equivalent arrangement of <code>group</code> and <code>literal</code> parsers.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">command</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">command</span><span class="tok-p">(</span><span class="tok-s">&quot;sub&quot;</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">command</span> <span class="tok-n">c</span> <span class="tok-o">=</span> <span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span><span class="tok-p">()</span>
    <span class="tok-p">.</span><span class="tok-n">sequential</span><span class="tok-p">()</span>
    <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">literal</span><span class="tok-p">(</span><span class="tok-s">&quot;sub&quot;</span><span class="tok-p">))</span>
    <span class="tok-p">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">group</span><span class="tok-p">());</span>
<span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span> <span class="tok-o">&amp;</span> <span class="tok-n">g</span> <span class="tok-o">=</span> <span class="tok-n">c</span><span class="tok-p">.</span><span class="tok-n">get</span><span class="tok-o">&lt;</span><span class="tok-n">lyra</span><span class="tok-o">::</span><span class="tok-n">group</span><span class="tok-o">&gt;</span><span class="tok-p">(</span><span class="tok-mi">1</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>I.e. it&#8217;s conposed of a <code>literal</code> followed by the rest of the command arguments.</p>
</div>
<div class="paragraph">
<p>Is-a <a href="#lyra_group"><code>lyra::group</code></a>.</p>
</div>
<div class="sect3">
<h4 id="lyra_command_ctor"><a class="anchor" href="#lyra_command_ctor"></a>11.16.1. Construction</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">command</span><span class="tok-o">::</span><span class="tok-n">command</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">);</span>
<span class="tok-n">command</span><span class="tok-o">::</span><span class="tok-n">command</span><span class="tok-p">(</span>
    <span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">function</span><span class="tok-o">&lt;</span><span class="tok-kt">void</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">group</span> <span class="tok-o">&amp;</span><span class="tok-p">)</span><span class="tok-o">&gt;&amp;</span> <span class="tok-n">f</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To construct an <code>command</code> we need a name (<code>n</code>) that matches, and triggers, that
command.</p>
</div>
</div>
<div class="sect3">
<h4 id="lyra_command_specification"><a class="anchor" href="#lyra_command_specification"></a>11.16.2. Specification</h4>
<div class="sect4">
<h5 id="lyra_command_help"><a class="anchor" href="#lyra_command_help"></a>11.16.2.1. <code>lyra:command::help</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">command</span> <span class="tok-o">&amp;</span> <span class="tok-n">command</span><span class="tok-o">::</span><span class="tok-n">help</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&amp;</span> <span class="tok-n">text</span><span class="tok-p">)</span>
<span class="tok-n">command</span> <span class="tok-o">&amp;</span> <span class="tok-n">command</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-k">const</span><span class="tok-o">&amp;</span> <span class="tok-n">description</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specify a help description for the command. This sets the help for the
underlying literal of the command.</p>
</div>
</div>
<div class="sect4">
<h5 id="lyra_command_add_argument"><a class="anchor" href="#lyra_command_add_argument"></a>11.16.2.2. <code>lyra::command::add_argument</code></h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">P</span><span class="tok-o">&gt;</span>
<span class="tok-n">command</span> <span class="tok-o">&amp;</span> <span class="tok-n">command</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-n">P</span> <span class="tok-k">const</span> <span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">P</span><span class="tok-o">&gt;</span>
<span class="tok-n">command</span> <span class="tok-o">&amp;</span> <span class="tok-n">command</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-n">parser</span> <span class="tok-k">const</span> <span class="tok-o">&amp;</span> <span class="tok-n">p</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds the given argument parser to the considered arguments for this <code>comand</code>.
The argument is added to the sub-group argument instead of this one. Hence it
has the effect of adding arguments <strong>after</strong> the command name.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_main"><a class="anchor" href="#lyra_main"></a>11.17. <code>lyra::main</code></h3>
<div class="paragraph">
<p>Encapsulates the common use case of a main program that has a help option and
has a minimal way to specify and parse options. This provides for a way to
specify options and arguments in a simple function form. It handles checking for
errors and reporting problems.</p>
</div>
<div class="sect3">
<h4 id="lyra_main_ctor"><a class="anchor" href="#lyra_main_ctor"></a>11.17.1. Construction</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-n">main</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span> <span class="tok-n">text</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Construct with text for description, which defaults to an empty string. The
description is specified for the help option that is added to the command line.</p>
</div>
</div>
<div class="sect3">
<h4 id="lyra_main_add_argument"><a class="anchor" href="#lyra_main_add_argument"></a>11.17.2. Add Argument</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-k">const</span> <span class="tok-n">T</span> <span class="tok-o">&amp;</span> <span class="tok-n">parser</span><span class="tok-p">)</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-n">add_argument</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">T</span> <span class="tok-o">&amp;</span> <span class="tok-n">parser</span><span class="tok-p">)</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">|=</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">T</span> <span class="tok-o">&amp;</span> <span class="tok-n">parser</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Adds a parser as an argument to the command line. These forward directly to the
<code>lyra::cli</code> equivalents. The added parser can be any of the regular Lyra parsers
like <code>lyra::opt</code> or <code>lyra::arg</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="lyra_main_simple_args"><a class="anchor" href="#lyra_main_simple_args"></a>11.17.3. Simple Args</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">V</span><span class="tok-o">&gt;</span>
<span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">initializer_list</span><span class="tok-o">&lt;</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&gt;</span> <span class="tok-n">arg_names</span><span class="tok-p">,</span> <span class="tok-n">V</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">default_value</span><span class="tok-p">)</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">V</span><span class="tok-o">&gt;</span>
<span class="tok-n">main</span> <span class="tok-o">&amp;</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-o">&amp;</span> <span class="tok-n">arg_name</span><span class="tok-p">,</span> <span class="tok-n">V</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">default_value</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifies, and adds, a new argument. Depending on the <code>arg_names</code> it can be
either a <code>lyra::opt</code> or <code>lyra::arg</code>. The first item in <code>arg_names</code> indicates
the type of argument created and added:</p>
</div>
<div class="paragraph">
<p>Specify either <code>-&lt;name&gt;</code> or <code>--&lt;name&gt;</code> to add a <code>lyra::opt</code>. You can specify as
many option names following the first name. A name that doesn&#8217;t follow the
option syntax is considered the as the help text for the option.</p>
</div>
<div class="paragraph">
<p>Specify a non <code>-</code> prefixed name as the first item to signify a positional
<code>lyra::arg</code>.</p>
</div>
<div class="paragraph">
<p>The single <code>std::string</code> call is equivalent to specifying just the one option or
argument.</p>
</div>
<div class="paragraph">
<p>Example specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>("-o", 0)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short <code>-o</code> option as <code>int</code> value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>("--opt", 0)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long <code>--opt</code> option as <code>int</code> value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>({"-o", "--opt"}, 1.0f)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short and long option as <code>float</code> value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>({"-o", "The option."}, 1.0f)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short option and help description as <code>float</code> value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>("opt", 2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Positional, i.e. <code>lyra::arg</code>, argument as <code>int</code> value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>({"opt", "The option."}, 2)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Positional argument and help description as <code>int</code> value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>("--opt", std::vector&lt;float&gt;())</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long option with as multiple float values.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="lyra_main_execute"><a class="anchor" href="#lyra_main_execute"></a>11.17.4. Execute</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">L</span><span class="tok-o">&gt;</span>
<span class="tok-kt">int</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-k">const</span> <span class="tok-n">args</span> <span class="tok-o">&amp;</span> <span class="tok-n">argv</span><span class="tok-p">,</span> <span class="tok-n">L</span> <span class="tok-n">action</span><span class="tok-p">)</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">L</span><span class="tok-o">&gt;</span>
<span class="tok-kt">int</span> <span class="tok-n">main</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-kt">int</span> <span class="tok-n">argc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">**</span> <span class="tok-n">argv</span><span class="tok-p">,</span> <span class="tok-n">L</span> <span class="tok-n">action</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Executes the given action after parsing of the program input arguments. It
returns either <code>0</code> or <code>1</code> if the execution was successful or failed
respectively. The <code>action</code> is called with the <code>lyra::main</code> instance to provide
access to the parsed argument values.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lyra_val"><a class="anchor" href="#lyra_val"></a>11.18. <code>lyra::val</code></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">auto</span> <span class="tok-nf">val</span><span class="tok-p">(</span><span class="tok-n">T</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">v</span><span class="tok-p">);</span>
<span class="tok-k">auto</span> <span class="tok-nf">val</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-o">*</span> <span class="tok-n">v</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Makes a bound self-contained value of the type of the given r-value. The created
bound values can be used in place of the value references for arguments. And can
be retrieved with the
<a href="#lyra_cli_array_ref"><code>lyra::cli::operator[]</code></a> call.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_history"><a class="anchor" href="#_history"></a>12. History</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_5_1"><a class="anchor" href="#_1_5_1"></a>12.1. 1.5.1</h3>
<div class="paragraph">
<p>Minor change to bring back the missing option argument hints from the usage
help output.</p>
</div>
</div>
<div class="sect2">
<h3 id="_1_5"><a class="anchor" href="#_1_5"></a>12.2. 1.5</h3>
<div class="paragraph">
<p>This release has some big changes in easy of use and functionality. There are
now alternate interfaces for specifying and fetching arguments. Also the help
output is now more compact and clearer. There is also new support for
sub-commands.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="⚠"></i>
</td>
<td class="content">
The <code>cli_parser</code> type was renamed to <code>cli</code>. Both the <code>cli_parser</code> type
and the <code>lyra/cli_parser.hpp</code> header are deprecated and will be removed in a
future release.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="⚠"></i>
</td>
<td class="content">
Changed the install CMake target from <code>BFG::Lyra</code> to <code>bfg::lyra</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>New</strong>: Main encapsulation of common use case of help option handling. With
shorthand specification of arguments.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Ability to specify argument values, with default, without specifying
a local external to the parser variable. Making it easier to specify
command lines. The values can be retrieved from the <code>cli</code> as a map from
argument names to the value.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Support construction of <code>lyra::args</code> from iterators for cases where
 the arguments come from some existing container.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Add Cmake install support.&#8201;&#8212;&#8201;<em>Jayesh Vinay Badwaik</em></p>
</li>
<li>
<p><strong>New</strong>: Command argument to make it easy to specify sub-commands.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Alternative sequential argument parsing mode.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Grouped arguments to specify and handle sub-command parsers.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: <code>literal</code> parser to directly match an argument.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fix missing hint text for optional, <code>lyra::arg</code>, arguments.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Bring back some cleaner and compact formatting of the help text.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Tested with
	Visual Studio 2017, VS 2019,
	MinGW-64 (gcc 8.1.0),
	Linux (
		clang 3.9, 4, 5, 6, 7, 8, 9, 10;
		gcc 4.9, 5, 6, 7, 8, 9, 10),
	Xcode (
		11.1, 11.2.1, 11.3.1, 11.4.1, 11.5, 11.6),
	on Azure Pipelines;
and with
	VS 2015,
	MinGW-64 (gcc 6.3, 7.3)
	on AppVeyor.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_4"><a class="anchor" href="#_1_4"></a>12.3. 1.4</h3>
<div class="paragraph">
<p>Changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>New</strong>: Allow passing option value choices as an array.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fix sample code in README to be correctly namespaced.&#8201;&#8212;&#8201;<em>Jayesh Badwaik</em></p>
</li>
<li>
<p>Fix commands example to actually show help when specified.&#8201;&#8212;&#8201;<em>Shreyas Potnis</em></p>
</li>
<li>
<p>Tested with
	Visual Studio 2017, VS 2019,
	MinGW-64 (gcc 8.1.0),
	Linux (
		clang 3.8, 3.9, 4, 5, 6, 7, 8, 9, 10;
		gcc 4.8, 4.9, 5, 6, 7, 8, 9, 10),
	Xcode (
		10.1, 10.2.1, 10.3, 11.1, 11.2.1, 11.3.1, 11.4),
	on Azure Pipelines;
and with
	VS 2015,
	MinGW-64 (gcc 6.3, 7.3)
	on AppVeyor.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_3"><a class="anchor" href="#_1_3"></a>12.4. 1.3</h3>
<div class="paragraph">
<p>Changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>New</strong>: Accept <code>-o2</code> style option+value arguments.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Accept <code>-abc</code> option name spelling as shorthand for <code>-a</code>, <code>-b</code>, <code>-c</code>.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fixed inconsistent handling of option values that look like options, like
negative numbers.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Rewrote argument token parsing for clarity, to avoid extra token buffer
allocation, and to allow for more option &amp; value variations.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fixed allowing junk extra characters after a non-string option value.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Support specifying a single value for choices of an argument.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fix various problems with the commands example program. Also now the
examples for the documentation are unit tested along with the
regular unit tests.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Tested with
Visual Studio 2015, VS 2017, VS 2019,
MinGW-64 (gcc 8.1),
Linux (clang 3.5, 3.6, 3.7, 3.8, 3.9, 4, 5, 6, 7, 8, 9; gcc 4.8, 4.9, 5,
6, 7, 8, 9),
Xcode (9.0, 9.0.1, 9.1, 9.2, 9.3, 9.3.1, 9.4, 9.4.1, 10.0, 10.1, 10.2,
10.2.1, 10.3, 11.0, 11.1, 11.2, 11.2.1),
on Azure Pipelines.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_2"><a class="anchor" href="#_1_2"></a>12.5. 1.2</h3>
<div class="paragraph">
<p>Changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>New</strong>: One can now accept 1-or-more on bound container arguments by only
specifying <code>required()</code> on such arguments.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: One can now define a <code>description</code> text to display as general command
information with the <code>help::description</code> method.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Add named methods as alternates for operators to add and specify
arguments. They follow the familiar Python <code>argparse</code> nomenclature.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p><strong>New</strong>: Single header file alternative version of the library. For those that
need or want such a thing.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Improve help for arguments that specify a cardinality.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Addition of more complicated use cases to demonstrate flexibility of library.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Continued internal clean up of code for stability and easier future
enhancements.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Tested with
Visual Studio 2015, VS 2017, VS 2019,
MinGW-64 (gcc 8.1),
Linux (clang 3.5, 3.6, 3.7, 3.8, 3.9, 4, 5, 6, 7, 8, 9; gcc 4.8, 4.9, 5,
6, 7, 8, 9),
Xcode (9.0, 9.0.1, 9.1, 9.2, 9.3, 9.3.1, 9.4, 9.4.1, 10.0, 10.1, 10.2,
10.2.1, 10.3, 11.0, 11.1, 11.2, 11.2.1),
on Azure Pipelines.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_1"><a class="anchor" href="#_1_1"></a>12.6. 1.1</h3>
<div class="paragraph">
<p>Changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>New</strong>: Add direct <a href="https://mesonbuild.com/">Meson Build</a> use support.&#8201;&#8212;&#8201;<em>Rémi Gastaldi</em></p>
</li>
<li>
<p><strong>New</strong>: Define argument value <code>choices()</code> as either a fixed set or checked
by a custom lambda function.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fix being able to parse straight from <code>args</code> outside of <code>cli</code>. Which
resulted in misleading parsing behavior. <em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fix use of <code>cardinality()</code> to correctly constrain bounded cardinality
ranges like <code>[0,n]</code>, <code>[n,m]</code>, <code>[n,n]</code>, and <code>[0,0]</code> (unbounded).
<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Fix use of <code>required()</code> arguments such that the parse errors if they are
absent.&#8201;&#8212;&#8201;<em>girstsf</em></p>
</li>
<li>
<p>Remove uses of <code>assert</code> macro to avoid internal aborts and make it easier
to use as a library.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Many documentation improvements.&#8201;&#8212;&#8201;<em>René Ferdinand Rivera Morell</em></p>
</li>
<li>
<p>Tested with
Visual Studio 2015, VS 2017, VS 2019,
MinGW-64 (gcc 8.1),
Linux (clang 3.5, 3.6, 3.7, 3.8, 3.9, 4, 5, 6, 7, 8, 9; gcc 4.8, 4.9, 5, 6, 7, 8, 9),
Xcode (9.0, 9.0.1, 9.1, 9.2, 9.3, 9.3.1, 9.4, 9.4.1, 10.0, 10.1, 10.2, 10.2.1, 10.3, 11.0),
on Azure Pipelines.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_1_0"><a class="anchor" href="#_1_0"></a>12.7. 1.0</h3>
<div class="paragraph">
<p>This is the initial base version based on Clara library. Changes from that
library:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Documentation.</p>
</li>
<li>
<p>Zero dependencies, even internally, by removing TextFlow and Catch bundled
libraries.</p>
</li>
<li>
<p>Conform to Pitchfork Layout R1.</p>
</li>
<li>
<p>Tested with Visual Studio 2015, VS 2017, MinGW (gcc 5.3), MinGW-64 (gcc 6.3,
7.3, 8.1), Linux (clang 3.5, 3.8, 3.9, 4, 5; gcc 4.8, 4.9, 5, 6, 7, 8),
Xcode (8.3, 9, 9.1, 10.1).</p>
</li>
<li>
<p>Tested with C++ 11, 14, 17, and 2a.</p>
</li>
<li>
<p><strong>New</strong>: customization of option prefix and separators.</p>
</li>
<li>
<p><strong>New</strong>: support for repeated arguments, from one to many.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments  { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</body>
</html>